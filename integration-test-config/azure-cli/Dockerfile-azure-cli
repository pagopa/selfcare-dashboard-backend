# Primo stage: usiamo un'immagine con git per clonare il repository
FROM alpine/git@sha256:3b7890cb947afd3f71adab55aa6b549ad0f8ddc4b9ed28b027563d73d49d8e11 AS git-stage
WORKDIR /repo
RUN git clone https://github.com/pagopa/selfcare-infra.git

FROM mcr.microsoft.com/azure-cli@sha256:18ec5cf02ba6b46e9858ddff1125baaa1f14ba919f77ebc67c918c891f8df4a2
COPY --from=git-stage /repo/selfcare-infra/src/core/resources /workspace/resources/resources
CMD ["/bin/sh", "-c", "/initAzurite.sh"]